<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{template.html}">

<div layout:fragment="content" style="background-color: #fafafa; font-family: 'Trebuchet MS', sans-serif;">
  <table border="0"
         cellpadding="0"
         cellspacing="0"
         width="100%"
         style="max-width: 600px;">
    <tr>
      <td align="center" width="100%" style="font-family: 'Trebuchet MS', sans-serif">
        <div
          style="background-color: #ffffff; width: 100%; color: #3d3d3d; box-shadow: 2px 4px 21px -8px rgba(0,0,0,0.8);
           font-size: 14px; margin-top: 36px; margin-bottom: 36px;">
          <div style="padding: 24px; border: 1px solid #dedede;">
            <div style="font-size: 20px; margin-bottom: 24px">
              <span th:if="${userName != null}">Доброго дня</span>
              <b th:if="${userName != null}" th:text="${userName + '.'}"></b>
              <span th:utext="${title}"></span>
            </div>
            <div th:utext="${body}" th:style="${'font-size: 18px; margin-bottom: 24px; white-space: pre-line; text-align: ' + contentAlign}"></div>

            <table style="font-size: 14px; text-align: left; width: 600px; border-color: #7c7c7c" border="1" cellpadding="0" cellspacing="0">

              <tr>
                <th style="padding: 8px;">Назва</th>
                <th style="padding: 8px;">Ціна</th>
                <th style="padding: 8px;">Кількість</th>
                <th style="padding: 8px;">Сума</th>
              </tr>

              <tr style="font-size: 14px;"  th:each="orderItem: ${order.orderItems}">
                <td style="padding: 8px;">
                  <div th:text="${orderItem.flowerSize.flower.flowerType.nameSingle}"></div>
                  <div th:text="${orderItem.flowerSize.flower.name}" style="font-weight: 500; color: #4caf50"></div>
                  <div th:text="${orderItem.flowerSize.size.name}"></div>
                </td>
                <td th:text="${orderItem.price / 100  + ' грн'}" style="padding: 8px;"></td>
                <td th:text="${orderItem.amount  + ' шт'}" style="padding: 8px;"></td>
                <td th:text="${orderItem.amount * (orderItem.price / 100) + ' грн'}" style="padding: 8px; font-weight: 500;"></td>
              </tr>

            </table>

            <div style="text-align: right; margin-bottom: 36px; margin-top: 4px">
              <span style="background-color: #eaf5ea; padding: 8px 16px; font-size: 24px">
              <span style="margin-right: 8px; color: #7c7c7c">Разом:</span>
              <span th:text="${(order.totalPrice - order.discount) / 100 + ' грн'}" style="font-weight: 500; color: #353535;"></span>
              </span>
            </div>

            <a th:if="${!order.user.isVirtual}"
              style="display: block; background: #4caf50; padding: 12px; text-align: center; border-radius: 2px;
            color: white; font-size: 14px; font-weight: 500; width: max-content; min-width: 180px; text-decoration: none; margin: 0 auto;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1); cursor: pointer;"
              th:href="${confirmUrl}"
              th:text="${confirmBtnText}"></a>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>

</html>

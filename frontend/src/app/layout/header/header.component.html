<div class="header-content">

  <button mat-button [matMenuTriggerFor]="mainNavigationMenu" class="mobile-menu">
    <i class="material-icons md-18">menu</i>
  </button>

  <a routerLink="/" class="logo">
    <img src="/assets/img/common/logo-white.png" alt="logo">
  </a>

  <div class="main-navigation">
    <a routerLink="/shop" mat-button routerLinkActive="active-link">Магазин</a>
    <a routerLink="/forum" mat-button routerLinkActive="active-link">Блог</a>
    <a routerLink="/contacts" mat-button routerLinkActive="active-link">Контакти</a>
  </div>

  <div class="login-button-wrapper" *ngIf="!securityService.isAuthenticated()">

    <div class="login-with-bucket">
      <button mat-button [matMenuTriggerFor]="bucket" class="bucket-button">
        <div class="bucket">
          <i class="fas fa-shopping-cart"></i>
            <div class="bucket-index" *ngIf="bucketService.bucketInfo.totalItems > 0">
            <div>{{bucketService.bucketInfo.totalItems}}</div>
            </div>
        </div>
      </button>

      <button mat-button class="login-button" (click)="openAuthDialog()">
        <i class="material-icons md-18">exit_to_app</i>
        <span>Увійти</span>
      </button>

      <button mat-button class="mobile-login-button" (click)="openAuthDialog()">
        <mat-icon aria-label="Login">account_circle</mat-icon>
      </button>
    </div>


  </div>

  <div class="login-button-wrapper" *ngIf="securityService.isAuthenticated()">

    <div class="login-with-bucket">
      <button mat-button [matMenuTriggerFor]="bucket" class="bucket-button">
        <div class="bucket" >
          <i class="fas fa-shopping-cart"></i>
          <div class="bucket-index" *ngIf="bucketService.bucketInfo.totalItems > 0">
            <div>{{bucketService.bucketInfo.totalItems}}</div>
          </div>
        </div>
      </button>

      <button mat-button [matMenuTriggerFor]="userMenu" class="login-button">
        <mat-icon aria-label="Login">account_circle</mat-icon>
        <span>{{securityService.getUser() .name}}</span>
      </button>

      <button mat-button [matMenuTriggerFor]="userMenu" class="mobile-login-button">
        <mat-icon aria-label="Login">account_circle</mat-icon>
      </button>
    </div>

  </div>



</div>

<mat-menu #userMenu="matMenu" class="auth-menu">
  <div class="profile-menu user-menu" *ngIf="securityService.hasRole(Role.USER)">
    <button mat-flat-button class="user-menu-button" routerLink="/my/profile">
      <i class="material-icons">perm_identity</i>
      <span>Мій профіль</span>
    </button>
    <button mat-flat-button class="user-menu-button" routerLink="/my/wishlist">
      <i class="material-icons">favorite_border</i>
      <span>Список бажань</span>
    </button>
    <button mat-flat-button class="user-menu-button" routerLink="/my/purchases">
      <i class="material-icons">shopping_basket</i>
      <span>Мої покупки</span>
    </button>
    <button mat-flat-button class="user-menu-button" routerLink="/my/favourite-articles">
      <i class="material-icons">notes</i>
      <span>Улюблені статті</span>
    </button>
  </div>

  <div class="profile-menu admin-menu" *ngIf="securityService.hasRole(Role.ADMIN) || securityService.hasRole(Role.SUPPORT)">
    <button mat-flat-button class="user-menu-button" routerLink="/admin">
      <i class="material-icons">table_chart</i>
      <span>Адмін Панель</span>
    </button>
  </div>

  <button mat-flat-button class="user-menu-button" (click)="logout()">
    <i class="material-icons">exit_to_app</i>
    <span>Вийти</span>
  </button>

</mat-menu>

<mat-menu #bucket="matMenu" class="bucket-menu">
  <div class="default-bucket-info" *ngIf="bucketService.bucketInfo.totalItems == 0">Кошик порожній</div>
  <div *ngIf="bucketService.bucketInfo.totalItems > 0">
    <div class="bucket-info-wrapper">
      <div>В вашій корзині <span class="bucket-items-amount">{{bucketService.bucketInfo.totalItems}}</span> позиції</div>
      <div>На сумму <span class="bucket-items-price">{{bucketService.bucketInfo.totalPrice / 100}}</span> грн</div>
    </div>
    <button mat-flat-button color="accent" (click)="openBucketDialog()">
      <i class="material-icons">shopping_basket</i>
      <span>Оформити замовлення</span>
    </button>
    <button mat-button color="primary" class="check-bucket-button" (click)="openBucketDialog()">Переглянути товари</button>
  </div>
</mat-menu>


<mat-menu #mainNavigationMenu="matMenu" class="main-navigation-menu">
    <a routerLink="/" mat-button routerLinkActive="active-link">Головна</a>
    <a routerLink="/forum" mat-button routerLinkActive="active-link">Блог</a>
    <a routerLink="/shop" mat-button routerLinkActive="active-link">Магазин</a>
    <a routerLink="/contacts" mat-button routerLinkActive="active-link">Контакти</a>
</mat-menu>


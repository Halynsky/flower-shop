<div class="wrapper" *ngIf="flowerSize">

  <div class="top-line-wrapper">
    <div class="title">
      <a class="flower-type-name" [routerLink]="['/shop']" [queryParams]="{flowerTypes: flowerSize.flower.flowerType.id}">{{flowerSize.flower.flowerType.nameSingle}}</a>
      <span class="flower-name"> {{flowerSize.flower.nameOriginal}}</span>
    </div>
    <div class="item-code">
      <div class="label">Артикул: </div>
      <div class="value">{{flowerSize.code}}</div>
    </div>
  </div>

  <div class="content">

    <div class="image" [ngStyle]="flowerSize.flower.image && {'background-image':'url(' + flowerSize.flower.image + ')'} || {'background-image':'url(' + flowerImagePlaceholder + ')'}"></div>

    <div class="add-to-card-block">

      <div class="add-to-card-inner">

        <table>

          <tr class="header">
            <th class="header-size"></th>
            <th class="header-price"></th>
            <th class="header-amount"></th>
          </tr>

            <tr [ngClass]="{'flower-size-empty': flowerSize.available == 0}">
              <td>{{flowerSize.size.name}}</td>
              <td>{{flowerSize.price / 100 + ' грн'}}</td>
              <td>
                <amount-controlled-input name="amount" [(ngModel)]="bucketItem.amount" [availableAmount]="bucketLocalService.getMaxAmountForFlowerSize(flowerSize.id, flowerSize.available)" [disabled]="!flowerSize.isAvailable"></amount-controlled-input>
              </td>
            </tr>

        </table>

        <div class="items-total-price-block-wrapper">
          <div class="items-total-price-block" [ngClass]="{'accent': bucketItem.amount * bucketItem.price > 0}">Разом на суму: <span class="items-total-price">{{bucketItem.amount * bucketItem.price / 100}} грн</span></div>
        </div>

        <button mat-flat-button color="accent" class="add-to-card-button" (click)="addToBucket()" [disabled]="!flowerSize.isAvailable">
          <i class="material-icons add_shopping_cart"></i>
          <span>Купити</span>
        </button>

      </div>

    </div>

    <div class="specifications">

      <div class="title">Характеристики</div>

      <div class="specification">
        <div class="specification-label">Назва</div>
        <div class="specification-value">{{flowerSize.flower.nameOriginal}}</div>
      </div>
      <div class="specification" *ngIf="flowerSize?.flower?.group?.name">
        <div class="specification-label">Група</div>
        <div class="specification-value">{{flowerSize.flower.group.name}}</div>
      </div>
      <div class="specification" *ngIf="flowerSize.flower.flowerType.plantingMaterialType">
        <div class="specification-label">Посадковий матеріал</div>
        <div class="specification-value">{{flowerSize.flower.flowerType.plantingMaterialType}}</div>
      </div>
      <div class="specification" *ngIf="flowerSize.flower.flowerHeightMin && flowerSize.flower.flowerHeightMax">
        <div class="specification-label" >Висота стебла</div>
        <div class="specification-value">{{flowerSize.flower.flowerHeightMin}} см - {{flowerSize.flower.flowerHeightMax}} см</div>
      </div>
      <div class="specification" *ngIf="flowerSize.flower.flowerSizeMin && flowerSize.flower.flowerSizeMax">
        <div class="specification-label" >Розмір квітки</div>
        <div class="specification-value">{{flowerSize.flower.flowerSizeMin}} см - {{flowerSize.flower.flowerSizeMax}} см</div>
      </div>
    </div>

    <div class="description">
      <div class="description-block" *ngIf="flowerSize.flower.description">
        <div class="title">Опис</div>
        <div class="value" [innerHTML]="flowerSize.flower.description | replaceLineBreaks"></div>
      </div>
      <div class="description-block" *ngIf="flowerSize.flower.group?.description">
        <div class="sub-title">{{flowerSize.flower.group.name}}</div>
        <div class="value" [innerHTML]="flowerSize.flower.group?.description | replaceLineBreaks"></div>
      </div>
      <div class="description-block" *ngIf="flowerSize.flower.flowerType.description">
        <div class="sub-title">{{flowerSize.flower.flowerType.name}}</div>
        <div class="value" [innerHTML]="flowerSize.flower.flowerType.description | replaceLineBreaks"></div>
      </div>
    </div>

  </div>

</div>
